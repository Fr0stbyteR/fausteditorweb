{"version":3,"sources":["webpack://Scope/webpack/universalModuleDefinition","webpack://Scope/webpack/bootstrap","webpack://Scope/./src/Scope.scss","webpack://Scope/./node_modules/css-loader/dist/runtime/api.js","webpack://Scope/./node_modules/style-loader/lib/addStyles.js","webpack://Scope/./node_modules/style-loader/lib/urls.js","webpack://Scope/./src/Scope.scss?c393","webpack://Scope/./src/Scope.ts","webpack://Scope/./src/index.ts","webpack://Scope/./src/utils.ts"],"names":["EScopeMode","Scope","drawInterleaved","ctx","w","h","d","zoom","zoomOffset","cursor","drawBackground","$","t","freqEstimated","sampleRate","drawMode","length","l","yFactor","i","j","abs","Math","$0","$1","$zerox","thresh","period","times","floor","wrap","drawL","isFinite","min","round","left","bottom","hCh","eventsToDraw","drawGrid","Interleaved","gridX","step","max","lineWidth","beginPath","strokeStyle","maxInStep","minInstep","$j","samp","$step","x","y","moveTo","lineTo","stroke","forEach","params","drawEvent","statsToDraw","values","$cursor","xLabel","toFixed","push","drawStats","drawOscilloscope","Oscilloscope","minInStep","drawSpectroscope","f","fftSize","fftOverlap","fftBins","$f","Spectroscope","fillStyle","closePath","fill","indexToFreq","drawSpectrogram","tempCtx","$0fft","$1fft","ceil","Spectrogram","save","globalCompositeOperation","imageSmoothingEnabled","$0src","$1src","split$","drawImage","canvas","height","restore","gridY","$fft","$ch","$bin","freq","yLabel","drawOfflineSpectrogram","last$","canvasWidth","width","$h","fillRect","k","normalized","hue","lum","mode","setLineDash","e","bufferSize","inFreqDomain","channels","unit","$0buffer","$1buffer","hStep","log2","$buffer","eventStrokeStyle","bufferStrokeStyle","normalStrokeStyle","font","textAlign","textBaseline","fillText","vStep","drawHLine","eStrings","map","event","data","path","value","type","join","textWidth","s","measureText","right","v","fillDivData","container","innerHTML","ch","divCh","document","createElement","classList","add","style","backgroundColor","divCell","spanIndex","innerText","toString","spanSamp","appendChild","getModeName","typeIn","Data","constructor","options","oscilloscope","spectroscope","spectrogram","undefined","clientWidth","clientHeight","rect","getBoundingClientRect","MouseEvent","offsetX","touches","pageX","offsetY","pageY","top","draw","eDown","preventDefault","stopPropagation","dragging","origZoom","origOffset","prevX","prevY","handleMouseMove","eMove","dX","dY","multiplier","offset","handleMouseUp","removeEventListener","addEventListener","raf","cancelAnimationFrame","requestAnimationFrame","divDefault","display","lastSpect$","spectTempCtx","offsetParent","divData","Object","assign","getChildren","bind","getContext","ctrl","children","contains","setAttribute","btnSwitch","btnZoomOut","btnZoom","btnZoomIn","btn","className","HTMLSpanElement","spanSwitch","span","newType","deltaY","deltaX","handleMouseDown","handleMouseLeave","zoomType","_zoom","zoomIn","maxZoom","cursorIn","_zoomOffset","zoomOffsetIn","resetZoom","_mode","modeIn","scope","getElementById","host","window","source","postMessage","key","mod"],"mappings":"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;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA,KAAK,KAAwC,EAAE,EAE7C;;AAEF,QAAQ,sBAAiB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Scope\"] = factory();\n\telse\n\t\troot[\"Scope\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"div.scope {\\n  font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, \\\"Helvetica Neue\\\", Arial, \\\"Noto Sans\\\", sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\", \\\"Noto Color Emoji\\\";\\n  background-color: #181818;\\n  color: whitesmoke; }\\n  div.scope > div {\\n    position: absolute; }\\n  div.scope > div.scope-data {\\n    display: flex;\\n    height: 100%;\\n    width: 100%;\\n    flex-direction: column;\\n    font-size: 0.75em;\\n    font-family: Consolas, monospace;\\n    overflow-x: auto; }\\n    div.scope > div.scope-data > .scope-channel {\\n      display: grid;\\n      position: relative;\\n      width: 1px;\\n      flex: 1 1 auto;\\n      grid-template-columns: repeat(auto-fill, 80px);\\n      grid-template-rows: repeat(auto-fill, 20px);\\n      grid-auto-flow: column;\\n      border-bottom: #505050 dashed 1px; }\\n      div.scope > div.scope-data > .scope-channel > .scope-cell {\\n        display: block;\\n        width: 80px;\\n        height: 20px;\\n        background-color: inherit;\\n        white-space: nowrap; }\\n        div.scope > div.scope-data > .scope-channel > .scope-cell > span {\\n          display: inline-block;\\n          border: #606060 solid 1px;\\n          text-align: right;\\n          padding: 0px 1px;\\n          height: 20px;\\n          line-height: 20px; }\\n          div.scope > div.scope-data > .scope-channel > .scope-cell > span:first-child {\\n            width: 30px;\\n            color: #ffffa0; }\\n          div.scope > div.scope-data > .scope-channel > .scope-cell > span:last-child {\\n            width: 50px; }\\n        div.scope > div.scope-data > .scope-channel > .scope-cell.highlight > span {\\n          border-color: #ff8800;\\n          background-color: #552200; }\\n  div.scope > canvas.scope-canvas {\\n    position: absolute;\\n    height: 100%;\\n    width: 100%; }\\n  div.scope > .scope-ui-controller {\\n    display: flex;\\n    opacity: 0.4;\\n    transition: opacity 0.15s ease-in-out, background-color 0.15s ease-in-out;\\n    z-index: 1; }\\n  div.scope:hover > .scope-ui-controller {\\n    opacity: 1;\\n    background-color: rgba(0, 0, 0, 0.5); }\\n  div.scope > .scope-default {\\n    position: relative;\\n    top: 20%;\\n    color: #0c5460;\\n    background-color: #d1ecf1;\\n    border-color: #bee5eb;\\n    padding: 0.75rem 1.25rem;\\n    margin-bottom: 1rem;\\n    border: 1px solid transparent;\\n    border-radius: 0.25rem; }\\n    div.scope > .scope-default > h5 {\\n      font-size: 1.25rem;\\n      margin-top: 0;\\n      margin-bottom: 0.5rem;\\n      font-weight: 500;\\n      line-height: 1.2;\\n      color: #0c5460; }\\n  div.scope .btn-overlay {\\n    font-size: 12px;\\n    border-color: transparent;\\n    border-radius: 0px;\\n    padding: 0rem 0.1rem;\\n    z-index: 3; }\\n    div.scope .btn-overlay.active {\\n      color: unset !important;\\n      background-color: unset !important;\\n      border-color: transparent transparent #f8f9fa transparent !important;\\n      border-bottom-color: #f8f9fa !important; }\\n      div.scope .btn-overlay.active:hover {\\n        color: #212529 !important;\\n        background-color: #f8f9fa !important;\\n        border-color: #f8f9fa !important; }\\n    div.scope .btn-overlay:focus {\\n      box-shadow: none !important; }\\n    div.scope .btn-overlay.btn-overlay-icon {\\n      width: 20px; }\\n  div.scope button:not(:disabled) {\\n    cursor: pointer; }\\n  div.scope .btn-outline-light {\\n    color: #f8f9fa;\\n    border-color: #f8f9fa; }\\n    div.scope .btn-outline-light:hover {\\n      color: #212529;\\n      background-color: #f8f9fa;\\n      border-color: #f8f9fa; }\\n  div.scope .btn {\\n    display: inline-block;\\n    font-weight: 400;\\n    text-align: center;\\n    vertical-align: middle;\\n    user-select: none;\\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\\n    background-color: transparent;\\n    border: 1px solid transparent; }\\n    div.scope .btn:focus {\\n      outline: none; }\\n\", \"\"]);\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \"{\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = \"(\".concat(item[2], \") and (\").concat(mediaQuery, \")\");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./Scope.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./Scope.scss\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/lib/loader.js!./Scope.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import { wrap, indexToFreq } from \"./utils\";\nimport \"./Scope.scss\";\n\nenum EScopeMode {\n    Data = 0,\n    Interleaved = 1,\n    Oscilloscope = 2,\n    Spectroscope = 3,\n    Spectrogram = 4\n}\ntype TOptions = {\n    container: HTMLDivElement;\n    type?: EScopeMode;\n};\ntype TStatsToDraw = {\n    x?: number;\n    y?: number;\n    xLabel?: string;\n    yLabel?: string;\n    values: number[];\n};\nexport type TDrawOptions = {\n    drawMode: \"offline\" | \"continuous\" | \"onevent\" | \"manual\";\n    $: number; // start sample index\n    $buffer: number; // start buffer index\n    t?: Float32Array[]; // Time domain data\n    f?: Float32Array[]; // Freq domain data\n    e?: { type: string; data: any }[][]; // events of each buffer\n    bufferSize: number;\n    fftSize: number;\n    fftOverlap: 1 | 2 | 4 | 8;\n    freqEstimated?: number;\n    sampleRate?: number;\n}\n\nexport class Scope {\n    raf: number;\n    ctx: CanvasRenderingContext2D;\n    container: HTMLDivElement;\n    canvas: HTMLCanvasElement;\n    btnSwitch: HTMLButtonElement;\n    btnZoomOut: HTMLButtonElement;\n    btnZoom: HTMLButtonElement;\n    btnZoomIn: HTMLButtonElement;\n    spanSwitch: HTMLSpanElement;\n    divData: HTMLDivElement;\n    divDefault: HTMLDivElement;\n    private _mode = EScopeMode.Oscilloscope;\n    private _zoom = { oscilloscope: 1, spectroscope: 1, spectrogram: 1 };\n    private _zoomOffset = { oscilloscope: 0, spectroscope: 0, spectrogram: 0 };\n    data: TDrawOptions = { drawMode: \"manual\", t: undefined, $: 0, $buffer: 0, bufferSize: 128, fftSize: 256, fftOverlap: 2 };\n    cursor: { x: number; y: number };\n    dragging: boolean = false;\n    spectTempCtx: CanvasRenderingContext2D;\n    lastSpect$: number = 0;\n    drawSpectrogram: boolean = false;\n\n    handleMouseMove = (e: MouseEvent | TouchEvent) => {\n        if (!this.data || !this.data.t || !this.data.t.length || !this.data.t[0].length) return;\n        if (this.mode === EScopeMode.Data) return;\n        const w = this.container.clientWidth;\n        const h = this.container.clientHeight;\n        const rect = this.canvas.getBoundingClientRect();\n        let x = e instanceof MouseEvent ? e.offsetX : e.touches[0].pageX - rect.left;\n        x = Math.max(0, Math.min(w, x));\n        let y = e instanceof MouseEvent ? e.offsetY : e.touches[0].pageY - rect.top;\n        y = Math.max(0, Math.min(h, y));\n        this.cursor = { x, y };\n        // if (this.data.drawMode === \"continuous\") return;\n        this.draw();\n    }\n    handleMouseDown = (eDown: MouseEvent | TouchEvent) => {\n        if (!this.data || !this.data.t || !this.data.t.length || !this.data.t[0].length) return;\n        if (this.mode === EScopeMode.Data) return;\n        eDown.preventDefault();\n        eDown.stopPropagation();\n        this.dragging = true;\n        this.canvas.style.cursor = \"grab\";\n        const origZoom = this.zoom;\n        const origOffset = this.zoomOffset;\n        let prevX = eDown instanceof MouseEvent ? eDown.pageX : eDown.touches[0].pageX;\n        let prevY = eDown instanceof MouseEvent ? eDown.pageY : eDown.touches[0].pageY;\n        const handleMouseMove = (eMove: MouseEvent | TouchEvent) => {\n            const x = eMove instanceof MouseEvent ? eMove.pageX : eMove.touches[0].pageX;\n            const y = eMove instanceof MouseEvent ? eMove.pageY : eMove.touches[0].pageY;\n            const dX = x - prevX;\n            const dY = y - prevY;\n            prevX = x;\n            prevY = y;\n            const multiplier = 1 / 1.015 ** dY;\n            const offset = -dX / this.zoom / this.canvas.width;\n            if (multiplier !== 1) this.zoom *= multiplier;\n            if (offset !== 0) this.zoomOffset += offset;\n            if (this.zoom !== origZoom || this.zoomOffset !== origOffset) this.draw();\n        };\n        const handleMouseUp = () => {\n            this.dragging = false;\n            this.canvas.style.cursor = \"\";\n            document.removeEventListener(\"mousemove\", handleMouseMove);\n            document.removeEventListener(\"touchmove\", handleMouseMove);\n            document.removeEventListener(\"mouseup\", handleMouseUp);\n            document.removeEventListener(\"touchend\", handleMouseUp);\n        };\n        document.addEventListener(\"mousemove\", handleMouseMove);\n        document.addEventListener(\"touchmove\", handleMouseMove);\n        document.addEventListener(\"mouseup\", handleMouseUp);\n        document.addEventListener(\"touchend\", handleMouseUp);\n    }\n    handleMouseLeave = () => {\n        if (!this.data || !this.data.t || !this.data.t.length || !this.data.t[0].length) return;\n        if (this.mode === EScopeMode.Data) return;\n        this.cursor = undefined;\n        this.draw();\n    }\n    static drawInterleaved(ctx: CanvasRenderingContext2D, w: number, h: number, d: TDrawOptions, zoom: number, zoomOffset: number, cursor?: { x: number; y: number }) {\n        this.drawBackground(ctx, w, h);\n        if (!d) return;\n        const { $, t, freqEstimated, sampleRate, drawMode } = d;\n        if (!t || !t.length || !t[0].length) return;\n        const l = t[0].length;\n        // Fastest way to get highest abs value in buffer\n        let yFactor = 1;\n        let i = t.length;\n        while (i--) {\n            let j = l;\n            while (j--) {\n                const abs = Math.abs(t[i][j]);\n                if (abs > yFactor) yFactor = abs;\n            }\n        }\n        let $0 = 0; // Draw start\n        let $1 = l - 1; // Draw End\n        if (drawMode === \"continuous\") { // Stablize\n            let $zerox = 0;\n            const thresh = 0.001;\n            const period = sampleRate / freqEstimated;\n            const times = Math.floor(l / period) - 1;\n            while (t[0][wrap($zerox++, $, l)] > thresh && $zerox < l);\n            if ($zerox >= l - 1) {\n                $zerox = 0;\n            } else {\n                while (t[0][wrap($zerox++, $, l)] < thresh && $zerox < l);\n                if ($zerox >= l - 1) {\n                    $zerox = 0;\n                }\n            }\n            const drawL = times > 0 && isFinite(period) ? Math.min(period * times, l - $zerox) : l - $zerox;\n            $0 = Math.round($zerox + drawL * zoomOffset);\n            $1 = Math.round($zerox + drawL / zoom + drawL * zoomOffset);\n        } else {\n            $0 = Math.round(l * zoomOffset);\n            $1 = Math.round(l / zoom + l * zoomOffset);\n        }\n        const left = 50;\n        const bottom = 20;\n        const hCh = (h - bottom) / t.length; // Height per channel\n        const eventsToDraw = this.drawGrid(ctx, w, h, $0, $1, yFactor, d, EScopeMode.Interleaved);\n        const gridX = (w - left) / ($1 - $0 - 1);\n        const step = Math.max(1, Math.round(1 / gridX)); // horizontal draw step for optimization\n        ctx.lineWidth = 2;\n        for (let i = 0; i < t.length; i++) {\n            ctx.beginPath();\n            ctx.strokeStyle = `hsl(${i * 60}, 100%, 85%)`;\n            let maxInStep;\n            let minInstep;\n            for (let j = $0; j < $1; j++) {\n                const $j = wrap(j, $, l); // True index\n                const samp = t[i][$j];\n                const $step = (j - $0) % step;\n                if ($step === 0) {\n                    maxInStep = samp;\n                    minInstep = samp;\n                }\n                if ($step !== step - 1) {\n                    if ($step !== 0) {\n                        if (samp > maxInStep) maxInStep = samp;\n                        if (samp < minInstep) minInstep = samp;\n                    }\n                    continue;\n                }\n                const x = (j - $0) * gridX + left;\n                let y = hCh * (i + 0.5 - maxInStep / yFactor * 0.5);\n                if (j === $0) ctx.moveTo(x, y);\n                else ctx.lineTo(x, y);\n                if (minInstep !== maxInStep) {\n                    y = hCh * (i + 0.5 - minInstep / yFactor * 0.5);\n                    ctx.lineTo(x, y);\n                }\n            }\n            ctx.stroke();\n        }\n        eventsToDraw.forEach(params => this.drawEvent(...params));\n        if (cursor && cursor.x > left && cursor.y < h - bottom) {\n            const statsToDraw: TStatsToDraw = { values: [] };\n            const $cursor = Math.round($0 + (cursor.x - left) / gridX);\n            statsToDraw.values = [];\n            statsToDraw.x = ($cursor - $0) * gridX + left;\n            statsToDraw.xLabel = $cursor.toFixed(0);\n            const $j = wrap($cursor, $, l);\n            for (let i = 0; i < t.length; i++) {\n                const samp = t[i][$j];\n                if (typeof samp === \"number\") statsToDraw.values.push(samp);\n            }\n            this.drawStats(ctx, w, h, statsToDraw);\n        }\n    }\n    static drawOscilloscope(ctx: CanvasRenderingContext2D, w: number, h: number, d: TDrawOptions, zoom: number, zoomOffset: number, cursor?: { x: number; y: number }) {\n        this.drawBackground(ctx, w, h);\n        if (!d) return;\n        const { $, t, freqEstimated, sampleRate, drawMode } = d;\n        if (!t || !t.length || !t[0].length) return;\n        const l = t[0].length;\n        // Fastest way to get highest abs value in buffer\n        let yFactor = 1;\n        let i = t.length;\n        while (i--) {\n            let j = l;\n            while (j--) {\n                const abs = Math.abs(t[i][j]);\n                if (abs > yFactor) yFactor = abs;\n            }\n        }\n        let $0 = 0; // Draw start\n        let $1 = l - 1; // Draw End\n        if (drawMode === \"continuous\") { // Stablize\n            let $zerox = 0;\n            const thresh = 0.001;\n            const period = sampleRate / freqEstimated;\n            const times = Math.floor(l / period) - 1;\n            while (t[0][wrap($zerox++, $, l)] > thresh && $zerox < l); // Find first raise\n            if ($zerox >= l - 1) { // Found nothing, no stablization\n                $zerox = 0;\n            } else {\n                while (t[0][wrap($zerox++, $, l)] < thresh && $zerox < l); // Find first drop\n                if ($zerox >= l - 1) {\n                    $zerox = 0;\n                }\n            }\n            const drawL = times > 0 && isFinite(period) ? Math.min(period * times, l - $zerox) : l - $zerox; // length to draw\n            $0 = Math.round($zerox + drawL * zoomOffset);\n            $1 = Math.round($zerox + drawL / zoom + drawL * zoomOffset);\n        } else {\n            $0 = Math.round(l * zoomOffset);\n            $1 = Math.round(l / zoom + l * zoomOffset);\n        }\n        const left = 50;\n        const bottom = 20;\n        const eventsToDraw = this.drawGrid(ctx, w, h, $0, $1, yFactor, d, EScopeMode.Oscilloscope);\n        const gridX = (w - left) / ($1 - $0 - 1);\n        const step = Math.max(1, Math.round(1 / gridX));\n        ctx.lineWidth = 2;\n        for (let i = 0; i < t.length; i++) {\n            ctx.beginPath();\n            ctx.strokeStyle = t.length === 1 ? \"white\" : `hsl(${i * 60}, 100%, 85%)`;\n            let maxInStep;\n            let minInStep;\n            for (let j = $0; j < $1; j++) {\n                const $j = wrap(j, $, l);\n                const samp = t[i][$j];\n                const $step = (j - $0) % step;\n                if ($step === 0) {\n                    maxInStep = samp;\n                    minInStep = samp;\n                }\n                if ($step !== step - 1) {\n                    if ($step !== 0) {\n                        if (samp > maxInStep) maxInStep = samp;\n                        if (samp < minInStep) minInStep = samp;\n                    }\n                    continue;\n                }\n                const x = (j - $0) * gridX + left;\n                let y = (h - bottom) * (0.5 - maxInStep / yFactor * 0.5);\n                if (j === $0) ctx.moveTo(x, y);\n                else ctx.lineTo(x, y);\n                if (minInStep !== maxInStep) {\n                    y = (h - bottom) * (0.5 - minInStep / yFactor * 0.5);\n                    ctx.lineTo(x, y);\n                }\n            }\n            ctx.stroke();\n        }\n        eventsToDraw.forEach(params => this.drawEvent(...params));\n        if (cursor && cursor.x > left && cursor.y < h - bottom) {\n            const statsToDraw: TStatsToDraw = { values: [] };\n            const $cursor = Math.round($0 + (cursor.x - left) / gridX);\n            statsToDraw.values = [];\n            statsToDraw.x = ($cursor - $0) * gridX + left;\n            statsToDraw.xLabel = $cursor.toFixed(0);\n            const $j = wrap($cursor, $, l);\n            for (let i = 0; i < t.length; i++) {\n                const samp = t[i][$j];\n                if (typeof samp === \"number\") statsToDraw.values.push(samp);\n            }\n            this.drawStats(ctx, w, h, statsToDraw);\n        }\n    }\n    static drawSpectroscope(ctx: CanvasRenderingContext2D, w: number, h: number, d: TDrawOptions, zoom: number, zoomOffset: number, cursor?: { x: number; y: number }) {\n        this.drawBackground(ctx, w, h);\n        if (!d) return;\n        const { $, f, fftSize, fftOverlap } = d;\n        if (!f || !f.length || !f[0].length) return;\n        const fftBins = fftSize / 2;\n        let $f = $ * fftOverlap / 2;\n        $f -= $f % fftBins;\n        const l = f[0].length;\n        const $0 = l - fftBins + Math.round(fftBins * zoomOffset);\n        const $1 = l - fftBins + Math.round(fftBins / zoom + fftBins * zoomOffset);\n        const left = 50;\n        const bottom = 20;\n        const hCh = (h - bottom) / f.length;\n        const eventsToDraw = this.drawGrid(ctx, w, h, $0, $1, 1, d, EScopeMode.Spectroscope);\n        const gridX = (w - left) / ($1 - $0 - 1);\n        const step = Math.max(1, Math.round(1 / gridX));\n        for (let i = 0; i < f.length; i++) {\n            ctx.beginPath();\n            ctx.fillStyle = f.length === 1 ? \"white\" : `hsl(${i * 60}, 100%, 85%)`;\n            let maxInStep;\n            for (let j = $0; j < $1; j++) {\n                const $j = wrap(j, $f, l);\n                const samp = f[i][$j];\n                const $step = (j - $0) % step;\n                if ($step === 0) maxInStep = samp;\n                if ($step !== step - 1) {\n                    if ($step !== 0 && samp > maxInStep) maxInStep = samp;\n                    continue;\n                }\n                const x = (j - $0) * gridX + left;\n                const y = hCh * (i + 1 - Math.min(1, Math.max(0, (maxInStep + 10) / 100 + 1)));\n                if (j === $0) ctx.moveTo(x, y);\n                else ctx.lineTo(x, y);\n            }\n            ctx.lineTo(w, hCh * (i + 1));\n            ctx.lineTo(left, hCh * (i + 1));\n            ctx.closePath();\n            ctx.fill();\n        }\n        eventsToDraw.forEach(params => this.drawEvent(...params));\n        if (cursor && cursor.x > left && cursor.y < h - bottom) {\n            const statsToDraw: TStatsToDraw = { values: [] };\n            const $cursor = $0 + Math.round((cursor.x - left) / gridX);\n            statsToDraw.values = [];\n            statsToDraw.x = ($cursor - $0) * gridX + left;\n            statsToDraw.xLabel = indexToFreq($cursor, fftBins, d.sampleRate).toFixed(0);\n            const $j = wrap($cursor, $f, l);\n            for (let i = 0; i < f.length; i++) {\n                const samp = f[i][$j];\n                if (typeof samp === \"number\") statsToDraw.values.push(samp);\n            }\n            this.drawStats(ctx, w, h, statsToDraw);\n        }\n    }\n    static drawSpectrogram(ctx: CanvasRenderingContext2D, tempCtx: CanvasRenderingContext2D, w: number, h: number, d: TDrawOptions, zoom: number, zoomOffset: number, cursor?: { x: number; y: number }) {\n        this.drawBackground(ctx, w, h);\n        if (!d) return;\n        const { $, f, fftSize, fftOverlap } = d;\n        if (!f || !f.length || !f[0].length) return;\n        const fftBins = fftSize / 2;\n        let $f = $ * fftOverlap / 2;\n        $f -= $f % fftBins;\n        const l = f[0].length / fftBins;\n        const $0fft = Math.floor(l * zoomOffset);\n        const $1fft = Math.ceil(l / zoom + l * zoomOffset);\n        const $0 = $0fft * fftBins;\n        const $1 = $1fft * fftBins;\n        const eventsToDraw = this.drawGrid(ctx, w, h, $0, $1, 1, d, EScopeMode.Spectrogram);\n        ctx.save();\n        ctx.globalCompositeOperation = \"lighter\";\n        ctx.imageSmoothingEnabled = false;\n        const left = 50;\n        const bottom = 20;\n        const $0src = wrap($0fft, $f / fftBins, l);\n        const $1src = $0src + $1fft - $0fft;\n        if ($1src > l) {\n            const split$ = l - $0src;\n            ctx.drawImage(tempCtx.canvas, $0src, 0, split$, tempCtx.canvas.height, left, 0, split$ / ($1src - $0src) * (w - left), h - bottom);\n            ctx.drawImage(tempCtx.canvas, 0, 0, $1src - l - 0.01, tempCtx.canvas.height, split$ / ($1src - $0src) * (w - left) + left, 0, (1 - split$ / ($1src - $0src)) * (w - left), h - bottom);\n        } else {\n            ctx.drawImage(tempCtx.canvas, $0src, 0, $1src - $0src, tempCtx.canvas.height, left, 0, w - left, h - bottom);\n        }\n        ctx.restore();\n        eventsToDraw.forEach(params => this.drawEvent(...params));\n        if (cursor && cursor.x > left && cursor.y < h - bottom) {\n            const statsToDraw: TStatsToDraw = { values: [] };\n            const gridX = (w - left) / ($1fft - $0fft);\n            const gridY = (h - bottom) / f.length / fftBins;\n            const $fft = $0fft + Math.floor((cursor.x - left) / gridX);\n            const $ch = Math.floor(cursor.y / gridY / fftBins);\n            const $bin = Math.floor((h - bottom - cursor.y) / gridY) % fftBins;\n            const $cursor = $fft * fftBins + $bin;\n            const $j = wrap($cursor, $f, f[0].length);\n            const freq = ($j % fftBins) / fftBins * d.sampleRate / 2;\n            const samp = f[$ch][$j];\n            if (typeof samp === \"number\") statsToDraw.values = [samp];\n            statsToDraw.x = ($fft - $0fft + 0.5) * gridX + left;\n            statsToDraw.y = (($ch + 1) * fftBins - $bin) * gridY;\n            statsToDraw.xLabel = $fft.toFixed(0);\n            statsToDraw.yLabel = freq.toFixed(0);\n            this.drawStats(ctx, w, h, statsToDraw);\n        }\n    }\n    static drawOfflineSpectrogram(ctx: CanvasRenderingContext2D, d: TDrawOptions, last$: number) {\n        if (!d) return last$;\n        const { $, f, fftSize, fftOverlap } = d;\n        if (!f || !f.length || !f[0].length) return last$;\n        const fftBins = fftSize / 2;\n        let $f = $ * fftOverlap / 2;\n        $f -= $f % fftBins;\n        const { width: canvasWidth, height: h } = ctx.canvas;\n        const l = f[0].length;\n        const $0 = wrap(last$, 0, l);\n        const $1 = $0 >= $f ? $f + l : $f;\n        if ($1 - $0 < 0) return last$;\n        const $0fft = Math.floor($0 / fftBins);\n        const $1fft = Math.ceil($1 / fftBins);\n        const hCh = h / f.length;\n        const w = l / fftBins;\n        const $h = hCh / fftBins;\n        if (canvasWidth !== w) ctx.canvas.width = w;\n        const step = Math.max(1, Math.round(fftBins / hCh));\n        for (let i = 0; i < f.length; i++) {\n            for (let j = $0fft; j < $1fft; j++) {\n                let maxInStep;\n                ctx.fillStyle = \"black\";\n                ctx.fillRect(j % w, i * hCh, 1, hCh);\n                for (let k = 0; k < fftBins; k++) {\n                    const samp = f[i][wrap(k, j * fftBins, l)];\n                    const $step = k % step;\n                    if ($step === 0) maxInStep = samp;\n                    if ($step !== step - 1) {\n                        if ($step !== 0 && samp > maxInStep) maxInStep = samp;\n                        continue;\n                    }\n                    const normalized = Math.min(1, Math.max(0, (maxInStep + 10) / 100 + 1));\n                    if (normalized === 0) continue;\n                    const hue = (normalized * 180 + 240) % 360;\n                    const lum = normalized * 50;\n                    ctx.fillStyle = `hsl(${hue}, 100%, ${lum}%)`;\n                    ctx.fillRect(j % w, (fftBins - k - 1) * $h + i * hCh, 1, Math.max(1, $h));\n                }\n            }\n        }\n        return wrap($1, 0, l);\n    }\n    static drawBackground(ctx: CanvasRenderingContext2D, w: number, h: number) {\n        ctx.save();\n        ctx.fillStyle = \"#181818\";\n        ctx.fillRect(0, 0, w, h);\n        ctx.restore();\n    }\n    static drawGrid(ctx: CanvasRenderingContext2D, w: number, h: number, $0: number, $1: number, yFactor: number, d: TDrawOptions, mode: EScopeMode) {\n        ctx.save();\n        ctx.setLineDash([]);\n        ctx.lineWidth = 1;\n        const { t, e, bufferSize, fftSize, fftOverlap, sampleRate } = d;\n        const inFreqDomain = mode === EScopeMode.Spectrogram || mode === EScopeMode.Spectroscope;\n        const fftBins = fftSize / 2;\n        const channels = mode === EScopeMode.Oscilloscope ? 1 : t.length;\n        const unit = mode === EScopeMode.Spectrogram ? \"Hz/frame\" : mode === EScopeMode.Spectroscope ? \"dB/Hz\" : \"lvl/samp\";\n        const eventsToDraw: [CanvasRenderingContext2D, number, number, number, { type: string; data: any }[]][] = [];\n        let $0buffer = $0 / bufferSize / (inFreqDomain ? fftOverlap / 2 : 1);\n        let $1buffer = $1 / bufferSize / (inFreqDomain ? fftOverlap / 2 : 1);\n        const hStep = 2 ** Math.ceil(Math.log2($1buffer - $0buffer)) / 8;\n        $0buffer -= $0buffer % hStep;\n        $1buffer -= $0buffer % hStep;\n        let $buffer = d.$buffer || 0;\n        if (inFreqDomain) $buffer -= $buffer % (fftBins / bufferSize / fftOverlap / 2);\n        const left = 50;\n        const bottom = 20;\n        const eventStrokeStyle = \"#ff8800\";\n        const bufferStrokeStyle = \"#004000\";\n        const normalStrokeStyle = \"#404040\";\n        ctx.fillStyle = \"#DDDD99\";\n        ctx.font = \"10px Consolas, monospace\";\n        ctx.textAlign = \"right\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillText(unit, 45, h - 10, 40);\n        ctx.textAlign = \"center\";\n        ctx.strokeStyle = \"white\";\n        ctx.beginPath();\n        ctx.moveTo(left, 0);\n        ctx.lineTo(left, h - bottom);\n        ctx.lineTo(w, h - bottom);\n        ctx.stroke();\n        ctx.strokeStyle = bufferStrokeStyle;\n        for (let j = $0buffer; j < $1buffer; j += hStep) {\n            const $fft = j / (fftBins / bufferSize) * fftOverlap / 2;\n            const x = (j * bufferSize * (inFreqDomain ? fftOverlap / 2 : 1) - $0) / ($1 - $0 - 1) * (w - left) + left;\n            if (x < left) continue;\n            ctx.strokeStyle = j % 1 === 0 ? bufferStrokeStyle : normalStrokeStyle;\n            ctx.beginPath();\n            ctx.moveTo(x, 0);\n            ctx.lineTo(x, h - bottom);\n            ctx.stroke();\n            if (mode === EScopeMode.Spectrogram) {\n                if ($fft % 1 === 0) ctx.fillText($fft.toFixed(), Math.min(x, w - 20), h - 10);\n            } else if (mode === EScopeMode.Spectroscope) {\n                ctx.fillText((($fft % 1) * sampleRate / 2).toFixed(), Math.min(x, w - 20), h - 10);\n            } else {\n                ctx.fillText((j * bufferSize).toFixed(), Math.min(x, w - 20), h - 10);\n            }\n        }\n        if (e) {\n            for (let j = Math.ceil($0buffer); j < $1buffer; j++) {\n                if (e[$buffer + j] && e[$buffer + j].length) {\n                    const x = (j * bufferSize * (inFreqDomain ? fftOverlap / 2 : 1) - $0) / ($1 - $0 - 1) * (w - left) + left;\n                    ctx.strokeStyle = eventStrokeStyle;\n                    eventsToDraw.push([ctx, w, h, x, e[$buffer + j]]);\n                    ctx.beginPath();\n                    ctx.moveTo(x, 0);\n                    ctx.lineTo(x, h - bottom);\n                    ctx.stroke();\n                }\n            }\n        }\n        ctx.strokeStyle = normalStrokeStyle;\n        const hCh = (h - bottom) / channels;\n        let vStep = 0.25;\n        while (yFactor / vStep > 2) vStep *= 2; // Maximum horizontal grids in channel one side = 2\n        ctx.beginPath();\n        ctx.textAlign = \"right\";\n        const drawHLine = (y: number, yLabel: string) => {\n            ctx.moveTo(left, y);\n            ctx.lineTo(w, y);\n            ctx.fillText(yLabel, 45, Math.max(y, 10));\n        };\n        for (let i = 0; i < channels; i++) {\n            let y = (i + 0.5) * hCh;\n            let $ = 0.5;\n            let yLabel = mode === EScopeMode.Spectrogram ? indexToFreq(fftBins * $, fftBins, sampleRate).toFixed(0) : mode === EScopeMode.Spectroscope ? (-110 + 100 * $).toFixed(0) : (-yFactor + 2 * yFactor * $).toFixed(2);\n            drawHLine(y, yLabel);\n            for (let j = vStep; j < yFactor; j += vStep) {\n                $ = 0.5 - j / yFactor / 2;\n                y = (i + 0.5 + j / yFactor / 2) * hCh;\n                yLabel = mode === EScopeMode.Spectrogram ? indexToFreq(fftBins * $, fftBins, sampleRate).toFixed(0) : mode === EScopeMode.Spectroscope ? (-110 + 100 * $).toFixed(0) : (-yFactor + 2 * yFactor * $).toFixed(2);\n                drawHLine(y, yLabel);\n                $ = 0.5 + j / yFactor / 2;\n                y = (i + 0.5 - j / yFactor / 2) * hCh;\n                yLabel = mode === EScopeMode.Spectrogram ? indexToFreq(fftBins * $, fftBins, sampleRate).toFixed(0) : mode === EScopeMode.Spectroscope ? (-110 + 100 * $).toFixed(0) : (-yFactor + 2 * yFactor * $).toFixed(2);\n                drawHLine(y, yLabel);\n            }\n        }\n        ctx.stroke();\n        ctx.beginPath();\n        ctx.setLineDash([4, 2]);\n        ctx.strokeStyle = \"white\";\n        for (let i = 1; i < channels; i++) {\n            ctx.moveTo(0, i * hCh);\n            ctx.lineTo(w, i * hCh);\n        }\n        ctx.stroke();\n        ctx.restore();\n        return eventsToDraw;\n    }\n    static drawEvent(ctx: CanvasRenderingContext2D, w: number, h: number, x: number, e: { type: string; data: any }[]) {\n        ctx.save();\n        ctx.font = \"bold 12px Consolas, monospace\";\n        ctx.fillStyle = \"rgba(0, 0, 0, 0.75)\";\n        const eStrings = e.map(event => (event.data.path ? `${event.data.path}: ${event.data.value}` : `${event.type}: ${event.data.join(\",\")}`));\n        const textWidth = Math.max(...eStrings.map(s => ctx.measureText(s).width)) + 5;\n        if (w - x >= textWidth) {\n            ctx.fillRect(x, 0, textWidth, e.length * 15 + 2);\n            ctx.textAlign = \"left\";\n        } else {\n            ctx.fillRect(x - textWidth, 0, textWidth, e.length * 15 + 2);\n            ctx.textAlign = \"right\";\n        }\n        ctx.fillStyle = \"#DDDD99\";\n        eStrings.forEach((s, i) => ctx.fillText(s, x, (i + 1) * 15, textWidth));\n        ctx.restore();\n    }\n    static drawStats(ctx: CanvasRenderingContext2D, w: number, h: number, statsToDraw: { x?: number; y?: number; xLabel?: string; yLabel?: string; values: number[] }) {\n        const left = 50;\n        const bottom = 20;\n        ctx.save();\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = \"#b0b0b0\";\n        ctx.beginPath();\n        const { x, y, xLabel, yLabel, values } = statsToDraw;\n        if (x) {\n            ctx.moveTo(x, 0);\n            ctx.lineTo(x, h - bottom);\n        }\n        if (y) {\n            ctx.moveTo(left, y);\n            ctx.lineTo(w, y);\n        }\n        ctx.stroke();\n        ctx.fillStyle = \"rgba(0, 0, 0, 0.5)\";\n        if (xLabel) ctx.fillRect(Math.min(x - 20, w - 40), h - 18, 40, 16);\n        if (yLabel) ctx.fillRect(5, Math.max(0, y - 8), 45, 16);\n        ctx.fillStyle = \"#DDDD99\";\n        ctx.font = \"bold 12px Consolas, monospace\";\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        if (xLabel) ctx.fillText(xLabel, Math.min(x, w - 20), h - 10, 40);\n        ctx.textAlign = \"right\";\n        if (yLabel) ctx.fillText(yLabel, 40, Math.max(10, y), 40);\n        ctx.textBaseline = \"bottom\";\n        const right: string[] = [];\n        values.forEach(v => right.push(v.toFixed(3)));\n        ctx.fillStyle = \"rgba(0, 0, 0, 0.75)\";\n        ctx.fillRect(w - 50, 0, 60, right.length * 15 + 5);\n        ctx.fillStyle = \"#DDDD99\";\n        right.forEach((s, i) => ctx.fillText(s, w - 2, (i + 1) * 15, 50));\n        ctx.restore();\n    }\n    static fillDivData(container: HTMLDivElement, d: TDrawOptions) {\n        container.innerHTML = \"\";\n        if (!d) return;\n        const { $, t, e } = d;\n        if (!t || !t.length || !t[0].length) return;\n        const l = t[0].length;\n        for (let i = 0; i < t.length; i++) {\n            const ch = t[i];\n            const divCh = document.createElement(\"div\");\n            divCh.classList.add(\"scope-channel\");\n            divCh.style.backgroundColor = t.length === 1 ? \"#181818\" : `hsl(${i * 60}, 100%, 10%)`;\n            for (let j = 0; j < Math.min(ch.length, 2048); j++) {\n                const $j = wrap(j, $, l);\n                const divCell = document.createElement(\"div\");\n                divCell.classList.add(\"scope-cell\");\n                const $buffer = (d.$buffer || 0) + Math.floor(j / d.bufferSize);\n                if (e && e[$buffer] && e[$buffer].length && j % d.bufferSize === 0) divCell.classList.add(\"highlight\");\n                const spanIndex = document.createElement(\"span\");\n                spanIndex.innerText = j.toString();\n                const spanSamp = document.createElement(\"span\");\n                spanSamp.innerText = ch[$j].toFixed(3);\n                divCell.appendChild(spanIndex);\n                divCell.appendChild(spanSamp);\n                divCh.appendChild(divCell);\n            }\n            if (ch.length > 2048) {\n                const divCell = document.createElement(\"div\");\n                divCell.classList.add(\"scope-cell\");\n                const spanIndex = document.createElement(\"span\");\n                spanIndex.innerText = \"...\";\n                const spanSamp = document.createElement(\"span\");\n                spanSamp.innerText = \"...\";\n                divCell.appendChild(spanIndex);\n                divCell.appendChild(spanSamp);\n                divCh.appendChild(divCell);\n            }\n            container.appendChild(divCh);\n        }\n    }\n    static getModeName(typeIn: EScopeMode) {\n        if (typeIn === EScopeMode.Data) return \"Data\";\n        if (typeIn === EScopeMode.Interleaved) return \"Interleaved\";\n        if (typeIn === EScopeMode.Oscilloscope) return \"Oscilloscope\";\n        if (typeIn === EScopeMode.Spectroscope) return \"Spectroscope\";\n        if (typeIn === EScopeMode.Spectrogram) return \"Spectrogram\";\n        return \"\";\n    }\n\n    constructor(options: TOptions) {\n        Object.assign(this, options);\n        this.getChildren();\n        this.bind();\n        this.mode = EScopeMode.Oscilloscope;\n    }\n    getChildren() {\n        this.spectTempCtx = document.createElement(\"canvas\").getContext(\"2d\");\n        this.spectTempCtx.canvas.height = 1024;\n        let ctrl: HTMLDivElement;\n        this.container.classList.add(\"scope\");\n        for (let i = 0; i < this.container.children.length; i++) {\n            const e = this.container.children[i];\n            if (e.classList.contains(\"scope-ui-controller\")) ctrl = e as HTMLDivElement;\n            if (e.classList.contains(\"scope-canvas\")) this.canvas = e as HTMLCanvasElement;\n            if (e.classList.contains(\"scope-data\")) this.divData = e as HTMLDivElement;\n            if (e.classList.contains(\"scope-default\")) this.divDefault = e as HTMLDivElement;\n        }\n        if (!ctrl) {\n            ctrl = document.createElement(\"div\");\n            ctrl.classList.add(\"scope-ui-controller\");\n            this.container.appendChild(ctrl);\n        }\n        if (!this.canvas) {\n            const canvas = document.createElement(\"canvas\");\n            canvas.classList.add(\"scope-canvas\");\n            this.container.appendChild(canvas);\n            this.canvas = canvas;\n        }\n        if (!this.divData) {\n            const divData = document.createElement(\"div\");\n            divData.classList.add(\"scope-data\");\n            this.container.appendChild(divData);\n            this.divData = divData;\n        }\n        if (!this.divDefault) {\n            const divDefault = document.createElement(\"div\");\n            divDefault.classList.add(\"scope-default\", \"alert\", \"alert-info\");\n            divDefault.setAttribute(\"role\", \"alert\");\n            divDefault.innerHTML = \"<h5>No Data</h5>\";\n            this.container.appendChild(divDefault);\n            this.divDefault = divDefault;\n        }\n        this.ctx = this.canvas.getContext(\"2d\");\n        for (let i = 0; i < ctrl.children.length; i++) {\n            const e = ctrl.children[i];\n            if (e.classList.contains(\"scope-ui-switch\")) this.btnSwitch = e as HTMLButtonElement;\n            if (e.classList.contains(\"scope-ui-zoomout\")) this.btnZoomOut = e as HTMLButtonElement;\n            if (e.classList.contains(\"scope-ui-zoom\")) this.btnZoom = e as HTMLButtonElement;\n            if (e.classList.contains(\"scope-ui-zoomin\")) this.btnZoomIn = e as HTMLButtonElement;\n        }\n        if (!this.btnSwitch) {\n            const btn = document.createElement(\"button\");\n            btn.className = \"scope-ui-switch btn btn-outline-light btn-sm btn-overlay\";\n            btn.setAttribute(\"title\", \"Interleaved Scope / Stacked Scope / Data\");\n            ctrl.appendChild(btn);\n            this.btnSwitch = btn;\n        }\n        if (!this.btnZoomOut) {\n            const btn = document.createElement(\"button\");\n            btn.className = \"scope-ui-zoomout btn btn-outline-light btn-sm btn-overlay btn-overlay-icon\";\n            btn.setAttribute(\"title\", \"Zoom Out\");\n            btn.innerHTML = \"-\";\n            ctrl.appendChild(btn);\n            this.btnZoomOut = btn;\n        }\n        if (!this.btnZoom) {\n            const btn = document.createElement(\"button\");\n            btn.className = \"scope-ui-zoom btn btn-outline-light btn-sm btn-overlay\";\n            btn.setAttribute(\"title\", \"Reset Zoom\");\n            btn.innerText = \"1.0x\";\n            ctrl.appendChild(btn);\n            this.btnZoom = btn;\n        }\n        if (!this.btnZoomIn) {\n            const btn = document.createElement(\"button\");\n            btn.className = \"scope-ui-zoomin btn btn-outline-light btn-sm btn-overlay btn-overlay-icon\";\n            btn.setAttribute(\"title\", \"Zoom In\");\n            btn.innerHTML = \"+\";\n            ctrl.appendChild(btn);\n            this.btnZoomIn = btn;\n        }\n        for (let i = 0; i < this.btnSwitch.children.length; i++) {\n            const e = this.btnSwitch.children[i];\n            if (e instanceof HTMLSpanElement) this.spanSwitch = e;\n        }\n        if (!this.spanSwitch) {\n            const span = document.createElement(\"span\");\n            span.innerText = \"Oscilloscope\";\n            this.btnSwitch.appendChild(span);\n            this.spanSwitch = span;\n        }\n    }\n    bind() {\n        this.btnSwitch.addEventListener(\"click\", () => {\n            let newType = (this.mode + 1) % 5;\n            if (newType === EScopeMode.Spectrogram && !this.drawSpectrogram) newType = (newType + 1) % 5;\n            if (newType === EScopeMode.Data && this.data.drawMode === \"continuous\") newType = (newType + 1) % 5;\n            if (newType === EScopeMode.Interleaved && this.data.t && this.data.t.length === 1) newType = (newType + 1) % 5;\n            this.mode = newType;\n        });\n        this.canvas.addEventListener(\"click\", () => {\n        });\n        this.canvas.addEventListener(\"wheel\", (e) => {\n            const multiplier = 1.5 ** (e.deltaY > 0 ? -1 : 1);\n            if (multiplier !== 1) this.zoom *= 1.5 ** (e.deltaY > 0 ? -1 : 1);\n            if (e.deltaX !== 0) this.zoomOffset += (e.deltaX > 0 ? 1 : -1) * 0.1;\n            this.handleMouseMove(e);\n        });\n        this.btnZoomOut.addEventListener(\"click\", () => {\n            this.zoom /= 1.5;\n            this.draw();\n        });\n        this.btnZoom.addEventListener(\"click\", () => {\n            this.zoom = 1;\n            this.draw();\n        });\n        this.btnZoomIn.addEventListener(\"click\", () => {\n            this.zoom *= 1.5;\n            this.draw();\n        });\n        this.canvas.addEventListener(\"mousedown\", this.handleMouseDown);\n        this.canvas.addEventListener(\"touchstart\", this.handleMouseDown);\n        this.canvas.addEventListener(\"mousemove\", this.handleMouseMove);\n        this.canvas.addEventListener(\"touchmove\", this.handleMouseMove);\n        this.canvas.addEventListener(\"mouseleave\", this.handleMouseLeave);\n        this.canvas.addEventListener(\"touchend\", this.handleMouseLeave);\n    }\n    draw = (data?: TDrawOptions) => {\n        if (data) this.data = data;\n        if (this.raf) cancelAnimationFrame(this.raf);\n        this.raf = requestAnimationFrame(() => {\n            if (!this.data || !this.data.t || !this.data.t.length || !this.data.t[0].length) {\n                if (this.divDefault.style.display === \"none\") {\n                    this.divDefault.style.display = \"block\";\n                    return;\n                }\n            } else if (this.divDefault.style.display !== \"none\") this.divDefault.style.display = \"none\";\n            if (data && this.drawSpectrogram) this.lastSpect$ = Scope.drawOfflineSpectrogram(this.spectTempCtx, this.data, this.lastSpect$);\n            if (this.data.drawMode === \"continuous\" && this.canvas.offsetParent === null) return; // not visible\n            const w = this.container.clientWidth;\n            const h = this.container.clientHeight;\n            if (this.canvas.width !== w) this.canvas.width = w;\n            if (this.canvas.height !== h) this.canvas.height = h;\n            if (this.mode === EScopeMode.Data) Scope.fillDivData(this.divData, this.data);\n            else if (this.mode === EScopeMode.Interleaved) Scope.drawInterleaved(this.ctx, w, h, this.data, this.zoom, this.zoomOffset, this.cursor);\n            else if (this.mode === EScopeMode.Oscilloscope) Scope.drawOscilloscope(this.ctx, w, h, this.data, this.zoom, this.zoomOffset, this.cursor);\n            else if (this.mode === EScopeMode.Spectroscope) Scope.drawSpectroscope(this.ctx, w, h, this.data, this.zoom, this.zoomOffset, this.cursor);\n            else if (this.mode === EScopeMode.Spectrogram) Scope.drawSpectrogram(this.ctx, this.spectTempCtx, w, h, this.data, this.zoom, this.zoomOffset, this.cursor);\n        });\n    }\n    get zoomType() {\n        return this.mode === EScopeMode.Spectroscope\n            ? \"spectroscope\"\n            : this.mode === EScopeMode.Spectrogram\n                ? \"spectrogram\"\n                : \"oscilloscope\";\n    }\n    get zoom() {\n        return this._zoom[this.zoomType];\n    }\n    set zoom(zoomIn) {\n        const maxZoom = this.data && this.data.t && this.data.t[0] ? Math.max(16, this.mode === EScopeMode.Spectroscope ? 16 : this.data.t[0].length / (this.inFreqDomain ? this.data.fftSize / 2 : this.data.bufferSize)) : 16;\n        const w = this.canvas.width;\n        let cursorIn = 0.5;\n        const left = 50;\n        if (this.cursor) cursorIn = Math.max(0, this.cursor.x - left) / (w - left);\n        const cursor = this.zoomOffset + cursorIn / this.zoom;\n        this._zoom[this.zoomType] = Math.min(maxZoom, Math.max(1, zoomIn));\n        this.zoomOffset = cursor - cursorIn / this.zoom;\n        this.btnZoom.innerHTML = this.zoom.toFixed(1) + \"x\";\n    }\n    get zoomOffset() {\n        return this._zoomOffset[this.zoomType];\n    }\n    set zoomOffset(zoomOffsetIn) {\n        this._zoomOffset[this.zoomType] = Math.max(0, Math.min(1 - 1 / this.zoom, zoomOffsetIn));\n    }\n    resetZoom() {\n        this._zoom = { oscilloscope: 1, spectroscope: 1, spectrogram: 1 };\n        this._zoomOffset = { oscilloscope: 0, spectroscope: 0, spectrogram: 0 };\n    }\n    get mode() {\n        return this._mode;\n    }\n    set mode(modeIn) {\n        this.spanSwitch.innerText = Scope.getModeName(modeIn);\n        this._mode = modeIn;\n        if (modeIn === EScopeMode.Data) {\n            this.divData.style.display = \"\";\n            this.canvas.style.display = \"none\";\n            this.btnZoom.style.display = \"none\";\n            this.btnZoomIn.style.display = \"none\";\n            this.btnZoomOut.style.display = \"none\";\n        } else {\n            this.divData.style.display = \"none\";\n            this.canvas.style.display = \"\";\n            this.btnZoom.style.display = \"\";\n            this.btnZoomIn.style.display = \"\";\n            this.btnZoomOut.style.display = \"\";\n        }\n        this.draw();\n    }\n    get inFreqDomain() {\n        return this.mode === EScopeMode.Spectrogram || this.mode === EScopeMode.Spectroscope;\n    }\n}\n","import { Scope } from \"./Scope\";\n\nconst scope = new Scope({ container: document.getElementById(\"root\") as HTMLDivElement });\nlet host: Window;\nwindow.addEventListener(\"message\", (e) => {\n    const { data, source } = e;\n    host = source as Window;\n    const { type } = data;\n    if (!type) return;\n    if (type === \"draw\") scope.draw(data.data);\n    if (type === \"mode\") scope.mode = data.mode;\n    if (type === \"drawSpectrogram\") scope.drawSpectrogram = data.drawSpectrogram;\n});\nwindow.addEventListener(\"keydown\", (e) => {\n    if (host) host.postMessage({ type: \"keydown\", key: e.key }, \"*\");\n});\nwindow.addEventListener(\"keyup\", (e) => {\n    if (host) host.postMessage({ type: \"keyup\", key: e.key }, \"*\");\n});\n(window as any).scope = scope;\n","/**\n * Mod support wrapping with negative numbers\n *\n * @param {number} x\n * @param {number} y\n */\nexport const mod = (x: number, y: number) => (x % y + y) % y;\n\nexport const wrap = (i: number, $: number, l: number) => mod(i + $, l);\n\nexport const indexToFreq = (i: number, fftBins: number, sampleRate: number) => (i % fftBins) / fftBins * sampleRate / 2;\n"],"sourceRoot":""}